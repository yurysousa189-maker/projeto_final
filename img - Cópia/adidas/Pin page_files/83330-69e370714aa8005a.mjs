(self.modernJsonp=self.modernJsonp||[]).push([["83330"],{351736:function(e,t,n){n.d(t,{F6:()=>v,Hs:()=>x,N$:()=>p,OW:()=>u,Ov:()=>m,Yc:()=>f,k7:()=>d,t4:()=>h,vs:()=>g});var r=n(667294),i=n(4533),s=n(774838),a=n(34550),o=n(935833),c=n(739405);let l="dark",d="rgba(17, 17, 17, 1)",u="rgba(17, 17, 17, 0)",p="rgb(43, 43, 43)",m="#767676",h="rgba(0,0,0, 0.8)",f=()=>(0,a.M0)().getItem(i.wg)===l;function g(){let e=(0,c.ml)(),{theme:t,isAuthenticated:n,referrerFromCookie:i}=(0,s.B)(),a=e&&t===l,[o,d]=(0,r.useState)(a);return(0,r.useEffect)(()=>{let e=a||n&&f();e&&(document.body.style.backgroundColor="#111111"),d(e)},[d,e,a,n,i]),o}let x=()=>{(0,a.M0)().setItem(i.wg,l),(0,o.My)("mweb.dark_mode.enable"),window.location.reload()},v=()=>{(0,a.M0)().removeItem(i.wg),(0,o.My)("mweb.dark_mode.disable"),window.location.reload()}},903610:function(e,t,n){n.d(t,{U:()=>o,Z:()=>c});var r=n(402983),i=n(795214);function s(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let a={start:["active","paused","end"],active:["active","end","paused"],paused:["resumed","paused","end"],resumed:["active","end","paused"],end:[],unknown:["start"]},o=(e,t)=>`${e}->${t}`;class c{constructor(e,t,n,a,c,l=null,d=[],u=null){s(this,"inView",!1),s(this,"state","unknown"),s(this,"lastInitiator",null),s(this,"endReason",null),s(this,"intersectionTrigger",([e])=>{let t=this.inView;(0,r.q4)(()=>{e?.isIntersecting?this.inView=!0:this.inView=!1,this.addTimeStamp("IntersectionObserver",this.inView,0===this.timeline.length?"start":"active"),i.ck.log(`[Experience Sessions] - ${this.inView?"ðŸ‘ï¸ In View":"âŒ Out of View"}`)},"IntersectionObserver",void 0,this.id,()=>{this.inView=t})()}),s(this,"handleTransitionEdgeCases",(e,t,n,r)=>{let s=o(e,t);return"paused->active"===s&&"IntersectionObserver"===n&&(this.addTimeStamp("IntersectionObserver",r,"paused",0),i.ck.warn(`[Experience Sessions] - âš ï¸ ${s} transition detected with initiator ${n}. Switching to 'paused' state instead.`),!0)}),this.id=e,this.experienceId=t,this.placementId=n,this.location=a,this.endOnSurfaceChange=c,this.observer=l,this.timeline=d,this.elementNode=u,u&&this.initiateObserver(u)}restart(){(0,r.q4)(()=>{this.timeline=[],i.ck.log("[Experience Sessions] - Restarting timeline for experience ",this.id)},"restart",void 0,this.id)}disconnect(){(0,r.q4)(()=>{if(!this.observer)throw new r.ar({placedExperienceId:this.id,customMessage:"disconnect() - Attempted to disconnect observer, but it has not been initiated yet."});this.observer.disconnect(),this.observer=null},"ExperienceInSession.disconnect",void 0,this.id)()}initiateObserver(e){if(e&&!this.observer)this.observer=new IntersectionObserver(this.intersectionTrigger,{root:null,rootMargin:"0px",threshold:.1}),this.elementNode=e,this.observer.observe(e);else{if(e?.isEqualNode(this.elementNode)){this.observer?.observe(e),this.elementNode=e,i.ck.log(`[Experience Sessions] - Resuming experience ${this.id}.`,e);return}i.ck.warn("[Experience Sessions] - Attempted to initiate observer with a null node or an existing observer. Node:",e)}}hasInitiated(){return null!==this.observer&&null!==this.elementNode&&"unknown"!==this.state}addTimeStamp(e,t,n="unknown",s){if(!this.hasInitiated()&&"start"!==n)throw new r.EO({placedExperienceId:this.id});let o=this.getLastTimeStamp()?.state||"unknown";if(!a[o].includes(n)){if(this.handleTransitionEdgeCases(o,n,e,t))return!0;throw new r.iL({placedExperienceId:this.id,currentState:o,newState:n})}return this.timeline.push({time:s||(0,i.dg)(),initiator:e,inView:t,state:n}),this.state=n,this.inView=t,this.lastInitiator=e,"end"===n&&"blur"!==e&&"focus"!==e&&"IntersectionObserver"!==e&&"restart"!==e&&(this.endReason=e),!0}setEndReason(e){this.endReason=e}isInView(){return this.inView}getSessionState(){return this.timeline?.[this.timeline.length-1]?.state??"unknown"}getLastTimeStamp(){return this.timeline.length>0?this.timeline[this.timeline.length-1]:void 0}getTimeStampBeforePause(){for(let e=this.timeline.length-1;e>=0;e-=1){let t=this.timeline[e];if(!t||"active"===t.state||"resumed"===t.state)break;if("paused"===t.state)if(e-1>=0)return this.timeline[e-1];else break}}getStateToResumeTo(){let e=this.getLastTimeStamp();if(e&&"paused"===e.state&&"IntersectionObserver"===e.initiator)return e.inView;let t=this.getTimeStampBeforePause();return void 0===t&&new r.zD({placedExperienceId:this.id}).log(),t?.inView??!1}getState(){return{inView:this.inView,state:this.state,lastInitiator:this.lastInitiator,endReason:this.endReason}}getTimelineDeepCopy(){return this.timeline.map(e=>({...e}))}getId(){return this.id}getExperienceId(){return this.experienceId}getPlacementId(){return this.placementId}getLocation(){return this.location}getEndOnSurfaceChange(){return this.endOnSurfaceChange}getElementNode(){return this.elementNode}getObserver(){return this.observer}getTimeline(){return this.timeline}getLength(){return this.timeline.length}}},947663:function(e,t,n){n.d(t,{$:()=>i,K:()=>r});let r=[{placementId:11,endOnSurfaceChange:!0},{placementId:40001,endOnSurfaceChange:!0},{placementId:29,endOnSurfaceChange:!0},{placementId:12,endOnSurfaceChange:!0},{placementId:1000088,endOnSurfaceChange:!0},{placementId:1000468,endOnSurfaceChange:!0},{placementId:1000168,endOnSurfaceChange:!0},{placementId:1000235,endOnSurfaceChange:!0},{placementId:1000264,endOnSurfaceChange:!0}],i=[506124,506436,504943,505226,505111,505801,507575,502535,500331,506046,506879,507502,505933,506791,502669,506234,505047,505471,505420,506234,505974,505201,502407,505541,506473,506921,502157,502004,506469,506930,508312]},402983:function(e,t,n){n.d(t,{AS:()=>m,D6:()=>p,EO:()=>d,Gw:()=>g,PI:()=>x,VV:()=>v,ar:()=>l,iL:()=>u,jQ:()=>f,q4:()=>_,z0:()=>h,zD:()=>w});var r=n(43113),i=n(903610),s=n(795214),a=n(767415);class o{constructor({name:e,placedExperienceId:t,message:n}){this.name=e,this.placedExperienceId=t,this.message=n}log(){s.ck.warn(`[ExperienceSessions] - Warning: ${this.name} for experience ${this.placedExperienceId} - ${this.message}`,{placedExperienceId:this.placedExperienceId})}}class c extends Error{constructor({name:e,placedExperienceId:t,customMessage:n}){super(n),this.name=e,this.placedExperienceId=t,Object.setPrototypeOf(this,c.prototype)}}class l extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Error occurred while creating an IntersectionObserver for experience with id ${e}.`,name:"IntersectionObserver",placedExperienceId:e})}}class d extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Attempted to create a timestamp without an observer for experience with id ${e}.`,name:"TimeStampNoObserver",placedExperienceId:e})}}class u extends c{constructor({placedExperienceId:e,customMessage:t,currentState:n,newState:r}){super({customMessage:t??`Invalid time stamp state transition: ${(0,i.U)(n,r)}.
Dropping time stamp.`,name:"InvalidStateTransition",placedExperienceId:e}),(0,a.nP)("experience_sessions_invalid_state_transition",{sampleRate:1,tags:{placedExperienceId:e,transition:(0,i.U)(n,r)}})}}class p extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Attempted to remove an experience with id ${e} from an empty session map.`,name:"RemoveOnEmptySessionMap",placedExperienceId:e})}}class m extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Attempted to remove a non-existent experience with id ${e}.`,name:"RemoveOnMissingExperience",placedExperienceId:e})}}class h extends c{constructor(e,t,n,r){let i=[{value:e,name:"Placed Experience ID"},{value:t,name:"Experience ID"},{value:n,name:"Placement ID"}].filter(e=>!e.value).map(e=>e.name);super({customMessage:i.length>0?`${i.join(" and ")} ${i.length>1?"are":"is"} required for this operation.`:r??"",name:"InvalidIdError",placedExperienceId:e||""})}}class f extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`No start state found in the timeline for experience with id ${e}.`,name:"NoStart",placedExperienceId:e})}}class g extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Total duration calculated is negative for experience with id ${e}.`,name:"NegativeTotal",placedExperienceId:e})}}class x extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Timeline ended without an end state for experience with id ${e}.`,name:"NoEnd",placedExperienceId:e})}}class v extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Total duration calculated is not a valid number for experience with id ${e}.`,name:"InvalidTotal",placedExperienceId:e})}}class w extends o{constructor({placedExperienceId:e,customMessage:t}){super({message:t??`Attempted to resume without a pause timestamp for experience with id ${e}. Was the session started before app focus?`,name:"TimeStampNoPause",placedExperienceId:e})}}let b=[p,m,h,f,g,x,v];function _(e,t,n,i,a){return(...o)=>{try{return e(...o)}catch(e){if(e instanceof Error){let n=(b.some(t=>e instanceof t)?e.placedExperienceId:i)||"0:unknown";s.ck.error(`[Experience Session] - ${t} - ${e.name}:${e.message}`);let[a,o]=n.split(":");(0,r.sW)(t,e.name,o||"0",Number(a))}else{let n=String(e);s.ck.error(`[Experience Session] - ${t} - Error: ${n}`),(0,r.AC)(e,t)}return a&&a(),n}}}},323350:function(e,t,n){n.d(t,{Z:()=>s,r:()=>r});let{Provider:r,get:i}=(0,n(213491).Z)("ExperienceSessionContext"),s=i},916559:function(e,t,n){n.d(t,{Z:()=>i});var r=n(947663);function i(e){let t=e=>{let t=r.K.find(t=>t.placementId===e);return{enableExperienceSession:!!t,endOnSurfaceChange:!!t?.endOnSurfaceChange}};return e?{...t(e),isSessionEnabledPlacement:t}:{enableExperienceSession:void 0,endOnSurfaceChange:void 0,isSessionEnabledPlacement:t}}},581909:function(e,t,n){n.d(t,{GF:()=>h,jQ:()=>w.Z,vG:()=>b,KF:()=>v,NQ:()=>x.Z});var r=n(667294),i=n(581722),s=n(312048),a=n(375217),o=n(402983);let{Provider:c,get:l,getMaybe:d}=(0,n(213491).Z)("ExperienceSessionManagerContext");var u=n(795214),p=n(893957),m=n(785893);function h({children:e}){let t=(0,r.useRef)({}),n=(0,s.TH)(),l=(0,i.I0)(),d=(0,a.$S)(),h=()=>0===Object.values(t.current).length||0===Object.keys(t.current).length,f=e=>{if(e)return t.current[e]},g=(0,r.useCallback)(e=>{let n=e.getId();return t.current[n]=e,u.ck.log(`[Experience Sessions] - Added experience with id ${n} to experiences in session map.
View ExperienceInSession object added: `,t.current[n]),t.current[n]},[]),x=(0,r.useCallback)((e,n="unknown")=>{(0,o.q4)(()=>{if(0===Object.values(t.current).length)throw new o.D6({placedExperienceId:e});if(!t.current[e])throw new o.AS({placedExperienceId:e});t.current[e].addTimeStamp(n,!1,"end"),t.current[e].disconnect(),u.ck.log(`[Experience Session] - Ended experience with id ${e} to experiences in session map with reason '${n}'.
View time stamps for experience: `,t.current[e].getTimeline(),`
Full experience in session object: `,t.current[e]),(0,a.Th)({placedExperienceId:e,experienceId:t.current[e].getExperienceId(),placementId:t.current[e].getPlacementId(),timeline:t.current[e].getTimelineDeepCopy(),endReason:n}),l(d(t.current[e].getPlacementId(),t.current[e].getExperienceId())),delete t.current[e]},"removeExperience",void 0,e)()},[d,l]),v=e=>{h()||Object.values(t.current).forEach(e=>{(0,o.q4)(()=>{e.hasInitiated()&&x(e.id,"page-unload")},"endOnPageLeave",void 0,e.id)()})},w=(0,r.useCallback)(()=>{h()||Object.values(t.current).forEach(e=>{(0,o.q4)(()=>{e.getLocation()!==n.pathname&&e.getEndOnSurfaceChange()&&e.hasInitiated()&&x(e.getId(),"surface-exit")},"endOnSurfaceChange",void 0,e.getId())()})},[n,x]),b=()=>{!h()&&(document.activeElement&&"IFRAME"===document.activeElement.tagName&&(u.ck.warn("[Experience Session] - Ignoring pauseOnPageBlur event in iframe"),1)||Object.values(t.current).forEach(e=>{(0,o.q4)(()=>{e.hasInitiated()&&(e.addTimeStamp("blur",!1,"paused"),u.ck.log(`[Experience Session] - Pausing experience ${e.getId()} session.`))},"pauseOnPageBlur",void 0,e.getId())()}))},_=()=>{h()||Object.values(t.current).forEach(e=>{(0,o.q4)(()=>{if(e.hasInitiated())if(e.getTimeline().length<2)new o.zD({placedExperienceId:e.id}).log(),e.restart();else{let t=e.getStateToResumeTo();e.addTimeStamp("focus",t,"resumed"),u.ck.log(`[Experience Session] - Resuming experience ${e.getId()} session from paused state with inView status: ${t}.`)}},"resumeOnPageFocus",void 0,e.getId())()})};(0,r.useEffect)(()=>{w()},[n,w]),(0,p.Z)(()=>(u.ck.log("[Experience Sessions] - âœ¨ Debug enabled!"),window.addEventListener("beforeunload",v),window.addEventListener("blur",b),window.addEventListener("focus",_),()=>{window.removeEventListener("beforeunload",v),window.removeEventListener("blur",b),window.removeEventListener("focus",_)}));let E=(0,r.useMemo)(()=>({experiencesInSession:t.current,getExperience:f,addExperience:g,removeExperience:x}),[t,g,x]);return(0,m.jsx)(c,{value:E,children:e})}var f=n(686659),g=n(903610),x=n(323350);function v({children:e,id:t,experienceId:n,placementId:i,enable:a=!0,endOnSurfaceChange:c=!0}){(0,r.useEffect)(()=>{(0,f.Z)("SessionWrapper","/app/packages/experiences/Framework/Sessions/Components/SessionWrapper.tsx")},[]);let l=d(),u=!a||!l,{getExperience:p,addExperience:h,removeExperience:v}=l||{getExperience:()=>void 0,addExperience:()=>void 0,removeExperience:()=>void 0},w=(0,r.useRef)(p(t)??null),b=(0,r.useRef)(null),_=(0,s.TH)(),E=(0,r.useCallback)(()=>{(0,o.q4)(()=>{if(!u){if(!t||!n||!i)throw new o.z0(t,n,i);w.current||(w.current=new g.Z(t,n,i,_.pathname,c,null,void 0,b.current),h(w.current))}},"startSession",void 0,t)()},[t,n,i,w,h,u,_,c]),S=(0,r.useCallback)(e=>{(0,o.q4)(()=>{if(!u){if(!t||!n||!i)throw new o.z0(t,n,i);w.current?.hasInitiated()&&v(t,e)}},"endView",void 0,t)()},[t,n,i,w,v,u]),I=(0,r.useCallback)(e=>{(0,o.q4)(()=>{u||(w.current?w.current.initiateObserver(e):b.current=e)},"setObserverRef",void 0,t)()},[w,u,t]),O=(0,r.useMemo)(()=>({startSession:E,endSession:S,experienceInView:w.current,setObserverRef:I}),[E,S,w,I]);return(0,m.jsx)(x.r,{value:O,children:e})}var w=n(916559);function b(e,t){let n,r=t.findIndex(e=>"start"===e.state);if(-1===r)throw new o.jQ({placedExperienceId:e});let i=e=>{if(void 0===n)return n=e.inView,!1;let t=n===e.inView;return n=e.inView,t},s=!0,a=0;for(let e of t.slice(r)){let t=e.inView?-e.time:e.time;if("end"===e.state){i(e)||(a+=t),s=!1;break}"resumed"===e.state&&(s=!0),s&&(i(e)||(a+=t),"paused"===e.state&&(s=!1))}if(s)throw new o.PI({placedExperienceId:e});if(a<0)throw new o.Gw({placedExperienceId:e});if("number"!=typeof a||Number.isNaN(a))throw new o.VV({placedExperienceId:e});return a}},43113:function(e,t,n){let r;n.d(t,{$S:()=>w,AC:()=>y,Am:()=>_,Ig:()=>v,N:()=>O,NW:()=>f,Sd:()=>E,Th:()=>R,YX:()=>I,be:()=>b,fO:()=>h,kd:()=>S,pz:()=>g,sW:()=>k,x4:()=>m});var i=n(667294),s=n(27399),a=n(104999),o=n(581909),c=n(402983),l=n(22991),d=n(795214),u=n(681698),p=n(767415);let m=(e,t)=>s.Z.create("UserExperiencePlatformResource",t?{extra_context:e,targeting:t}:{extra_context:e}).callGet(),h=(e,t)=>n=>s.Z.create("UserExperiencePlatformResource",t?{extra_context:e,targeting:t}:{extra_context:e}).callGet().then(e=>e.resource_response?n((0,l.OD)(e.resource_response.data)):void 0),f=e=>t=>s.Z.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then(e=>e.resource_response?t((0,l.xF)(e.resource_response.data)):void 0),g=(e,t,n,i,a)=>(o,c)=>{if(t)return Promise.resolve();if(i&&(r=i),1===e.length){let t=e[0],r=c().experiences[t];if(JSON.stringify(r?.extraContext||null)===JSON.stringify(n)||(0,d.E3)(r)&&!(n&&Object.keys(n).length>0))return Promise.resolve()}return s.Z.create("UserExperienceResource",{placement_ids:e,extra_context:n||null,targeting:i}).callGet().then(t=>{if(!t.resource_response)return;let n=t.resource_response.data||{};if(a){let{experiences:t}=c();d.ck.log("[MVC] Post Checks - Checking existing experiences in store"),e.forEach(e=>{let r=t[e];if(r&&0!==r.experience_id){var i;i=n[e],(0,p.nP)("experience_framework.fetch.post_check.failures",{sampleRate:.01,tags:{placement_id:e,experience_in_store:r.experience_id,experience_from_server:i?.experience_id}}),n[e]=r}})}o((0,l.cL)(n))})},x=(e,t,n,i)=>(a,o,c,d=!1,u,p)=>(m,f)=>{let{experiences:g,experiencesMulti:x}=f(),v=null,w=!0;if(d||(v=(w=!!g[a]&&g[a].experience_id===o)?g[a]:Array.isArray(x[a])&&x[a]?.find(e=>e.experience_id===o)),v&&v.experience_id===o||d&&a&&o){let d=s.Z.create(e,{placed_experience_id:`${a}%3A${o}`,extra_context:u??{},targeting:p}),f=w?l.Yb:l.xW;switch(t){case"dismissed":return d.callDelete().then(()=>{m(f(a,o,t)),m(h(void 0,r)),n&&i&&n({event_type:i,object_id_str:o.toString()})});case"completed":return d.callUpdate().then(()=>{!c&&(m(f(a,o,t)),m(h(void 0,r)),n&&i&&n({event_type:i,object_id_str:o.toString()}))});case"viewed":return m(f(a,o,t)),d.callUpdate().then(()=>{1000162===a&&m(h()),n&&i&&n({event_type:i,object_id_str:o.toString()})});case"completedWithoutHomefeed":return d.callUpdate().then(()=>{c||m(f(a,o,t)),n&&i&&n({event_type:i,object_id_str:o.toString()})})}}return Promise.resolve()},v=()=>{let e=(0,a.Z)();return(0,i.useCallback)(x("UserExperienceViewedResource","viewed",e,4503),[e])},w=()=>{let e=(0,a.Z)();return(0,i.useCallback)((t,n,r,i=!1,s,a)=>(r,s)=>{let{experiences:a,experiencesMulti:o}=s(),c=null,u=!0;if(i||(c=(u=!!a[t]&&a[t].experience_id===n)?a[t]:Array.isArray(o[t])&&o[t]?.find(e=>e.experience_id===n)),c&&c.experience_id===n||i&&t&&n){let i=u?l.Yb:l.xW;d.ck.log(`[MVC] View-End - Removing experience ${t}:${n} from store.`),(0,p.nP)("experience_framework.view_end",{tags:{placement_id:t,experience_id:n}}),r(i(t,n,"view-end")),e&&e({event_type:4503,object_id_str:n.toString()})}return Promise.resolve()},[e])},b=()=>{let e=(0,a.Z)();return(0,i.useCallback)(x("UserExperienceCompletedResource","completed",e,6567),[e])},_=()=>{let e=(0,a.Z)();return(0,i.useCallback)(x("UserExperienceResource","dismissed",e,6568),[e])},E=()=>{let e=(0,a.Z)();return(0,i.useCallback)(x("UserExperienceCompletedResource","completedWithoutHomefeed",e,6567),[e])},S=(e,t)=>(n,r)=>{let{experiences:i}=r(),s=i[e];s&&s.triggerable_placed_exps&&s.triggerable_placed_exps.length&&s.triggerable_placed_exps.forEach(n=>{let[,r]=n.split(":"),i=t,a=s?.metadata?.[r];a&&(i={...t,..."object"==typeof a?a:{}}),(0,u.Z)({url:`/v3/experiences/${n.replace(":","%3A")}/trigger/`,method:"PUT",data:i?{extra_context:JSON.stringify(i,null,1)}:{}}).then(()=>{((e,t,n={})=>(0,p.nP)(`${e}.${t}`,{sampleRate:1,tags:n}))("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:r})})})},I=e=>(t,n)=>{t(S(e));let{experiences:r}=n();return r[e]},O=(e,t,n,i)=>s=>{n&&(r=n),s(S(e,t)),t&&Object.keys(t).length>0&&s(g([e],!1,t,n,i))},k=async(e,t,n,r)=>{(0,p.nP)("experience_framework.view_duration.error",{sampleRate:1,tags:{func:e,type:t,experience_id:n,placement_id:r}})},y=async(e,t)=>{let n=e instanceof Error?e.message:String(e);(0,p.nP)("experience_framework.view_duration.unknown_error",{sampleRate:1,tags:{function:t,error:n}})},R=e=>{let{placedExperienceId:t,experienceId:n,placementId:r,endReason:i,timeline:s}=e;(0,c.q4)(()=>{let e=(0,o.vG)(t,s);d.ck.log(`[Experience Sessions] âœ¨ Total duration for experience ${t} is ${e}ms - Sending to statsboard with end reason: ${i}`),(0,p.LY)("experience_framework.view_duration",e,{sampleRate:.2,tags:{placement_id:r,experience_id:n,end_reason:i}})},"calculateTotalDuration",void 0,t,()=>{d.ck.error(`[Experience Sessions] âŒ Error calculating total duration for experience ${t} due to previous error`)})()}},375217:function(e,t,n){n.d(t,{kd:()=>r.kd,$S:()=>r.$S,Tl:()=>a,CF:()=>o,Ig:()=>r.Ig,x4:()=>r.x4,be:()=>r.be,N:()=>r.N,Sd:()=>r.Sd,YX:()=>r.YX,NW:()=>r.NW,Am:()=>r.Am,dy:()=>c,fO:()=>r.fO,Th:()=>r.Th,pz:()=>r.pz});var r=n(43113),i=n(27399);let s=(e,t,n,s)=>(a,o)=>c=>{if(a&&a.id){let l=i.Z.create(e,{placed_experience_id:a.id,extra_context:{}});switch(t){case"dismissed":l.callDelete().then(()=>{c((0,r.fO)()),n&&s&&n({event_type:s,object_id_str:a.id.toString()})});break;case"completed":l.callUpdate().then(()=>{o||c((0,r.fO)()),n&&s&&n({event_type:s,object_id_str:a.id.toString()})});break;case"viewed":l.callUpdate().then(()=>{n&&s&&n({event_type:s,object_id_str:a.id.toString()})})}}},a=e=>s("UserExperienceCompletedResource","completed",e,6567),o=s("UserExperienceResource","dismissed"),c=e=>s("UserExperienceViewedResource","viewed",e,4503)},22991:function(e,t,n){n.d(t,{OD:()=>o,Yb:()=>a,cL:()=>c,xF:()=>i,xW:()=>s});var r=n(147155);let i=e=>({type:r.$S,payload:{experiencesMulti:e}}),s=(e,t,n)=>({type:r.V$,payload:{placementId:e,experienceId:t,status:n}}),a=(e,t,n)=>({type:r.iY,payload:{placementId:e,experienceId:t,status:n}}),o=e=>({type:r._4,payload:{experiences:e}}),c=e=>({type:r.mR,payload:{experiences:e}})},795214:function(e,t,n){n.d(t,{dg:()=>E,A0:()=>g,E3:()=>m,wQ:()=>_,nR:()=>h,MQ:()=>f,ck:()=>S,dG:()=>p,Cv:()=>x});var r=n(667294),i=n(740097),s=n(173874);let a=[11,1000168,40001],o={1:{id:1,route:"/",onRoute:s.isHomeFeedPage,placements:[11,1000541,1000503,40001]},13:{id:13,route:"/business/hub/",onRoute:s.isBusinessHubPage,placements:[1000168]}};var c=n(629724),l=n(748336),d=n(785893);let u={display_data:{},experience_id:1,id:"noop",placement_id:0,type:0};function p(e,t){let n=!!(e&&"object"==typeof e&&Object.keys(e).length>0&&Object.keys(u).every(t=>t in e))&&1!==e.experience_id&&0!==e.type;if(t){if(!n)return!1;if("experience_id"in t)return e.experience_id===t.experience_id;if("type"in t)return e.type===t.type;if("status"in t)return"status"in e&&e.status===t.status;throw Error("Invalid options provided to isExperience. Options must be one of: { experience_id: number }, { type: number }, or { status: ExperienceStatus }")}return n}function m(e){return!!e&&0!==e.type}let h=(e,t,n,r,i,s=!0)=>{let o="existingExperience";return r?m(r)?n&&(o="placementInSurface",!n.placements.includes(e))?{shouldRefresh:!0,refreshReasoning:"placementNotInSurface"}:i?(o="inSSRPlacement",a.includes(e)?{shouldRefresh:!1,refreshReasoning:o}:{shouldRefresh:!0,refreshReasoning:"notAnSSRPlacement"}):!s||(o="placementMounted",t.mountedPlacements[e]||t.registeredAfterActionPlacements[e])?{shouldRefresh:!1,refreshReasoning:o}:{shouldRefresh:!0,refreshReasoning:"placementNotMounted"}:{shouldRefresh:!0,refreshReasoning:"experienceNotRenderable"}:{shouldRefresh:!0,refreshReasoning:"noExistingExperience"}},f=(e,t,n)=>{let r=e[n];return t[n]&&m(r)?r:null};function g(e){return e.display_data?.anchor}function x(e){return Object.values(o).find(t=>t.onRoute?t.onRoute(e):t.route===e.pathname)}let v=/<(\w+)\s*([^>]*)>([^<]*)<\/\1>/gim,w=/(?:href)=["']?([^"'>\s\\]*)["']?/im,b=/(?:target)=["']?([^"'>\s\\]*)["']?/im,_=e=>{let t=function(e){let t=[],n=0;for(let r of Array.from(e.matchAll(v))){if(r.index>n){let i=e.slice(n,r.index);i&&t.push({type:"text",content:i})}let[i,s,a,o]=r;switch(s){case"a":t.push({type:"link",content:o||"",attrs:a||""});break;case"b":t.push({type:"bold",content:o||""});break;default:t.push({type:"text",content:i})}n=r.index+i.length}if(n<e.length){let r=e.slice(n);r&&t.push({type:"text",content:r})}return t}(e);return(0,d.jsx)(i.xe,{inline:!0,children:t.map(({type:e,content:t,attrs:n},s)=>{switch(e){case"text":return(t?.split(`
`)||[]).map((e,n)=>(0,d.jsxs)(r.Fragment,{children:[n>0&&(0,d.jsx)("br",{}),(0,d.jsx)(i.xe,{inline:!0,children:e})]},`${t}-${n}`));case"bold":return(0,d.jsx)(i.xe,{inline:!0,weight:"bold",children:t},`${t}-${s}`);case"link":let a=n?.match(w),o=a&&a.length>1?a[1]:void 0,c=n?.match(b),u=c&&c.length>1?c[1]:void 0;if(!o)return(0,d.jsx)(i.xe,{inline:!0,children:t},`${t}-${s}`);let p=!1;return p=(0,l.Z)({url:o}),(0,d.jsx)(i.rU,{display:"inline",externalLinkIcon:p?"default":"none",href:o,rel:p?"nofollow":"none",target:"_blank"===u?"blank":void 0,children:t},`${o}-${s}`);default:return null}})})},E=()=>"undefined"!=typeof window&&performance&&performance.now?Math.floor(performance.now()):Math.floor(Date.now()),S=(0,c.Z)()&&(0,c.Z)().debug_experience_session?console:{log:(...e)=>{},error:(...e)=>{},warn:(...e)=>{}}},554092:function(e,t,n){n.d(t,{i:()=>r});let r={REGISTRATION:"registration",SETTINGS:"settings",GOOGLE_PEOPLE_API:"google_people_api",HOLISTIC_PROFILE_PROMPT:"holistic_profile_prompt",IN_APP_BIRTHDAY_PROMPT:"in_app_birthday_prompt",FIX_EMAIL_PROMPT:"fix_email_prompt",NUX:"nux",BUSINESS_HUB:"business_hub",UNKNOWN:"unknown"}},748336:function(e,t,n){n.d(t,{Z:()=>i});var r=n(426775);let i=({url:e})=>!!(e&&e.match(/^https{0,1}:\/\//)&&!(0,r.Z)(e))}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/83330-69e370714aa8005a.mjs.map